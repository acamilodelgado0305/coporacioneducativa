<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Curso Experto en Manipulaci√≥n de Alimentos | CertiTec Colombia</title>
    <link rel="icon" href="logopagina.png" type="image/png" />
    <meta
      name="description"
      content="Convi√©rtete en experto en inocuidad alimentaria. Curso completo y certificado en Colombia, incluye HACCP y Resoluci√≥n 2674. Obt√©n tu certificado hoy."
    />
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <style>
      body {
        font-family: "Poppins", sans-serif;
        background-color: #f1f5f9; /* bg-slate-100 */
      }
      :root {
        --primary-color: #002e7d; /* Azul principal */
        --secondary-color: #10b981; /* Verde (esmeralda) */
        --success-color: #22c55e; /* green-500 */
        --error-color: #ef4444; /* red-500 */
      }
      .text-primary { color: var(--primary-color); }
      .bg-primary { background-color: var(--primary-color); }
      .text-secondary { color: var(--secondary-color); }
      .border-secondary { border-color: var(--secondary-color); }
      .btn-main {
        background-color: var(--secondary-color);
        color: white;
        padding: 0.75rem 1.5rem;
        border-radius: 0.5rem;
        font-weight: 600;
        transition: all 0.2s ease-in-out;
        border: none;
        cursor: pointer;
      }
      .btn-main:hover {
        background-color: #059669; /* emerald-600 */
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(16, 185, 129, 0.2);
      }
      .btn-main:disabled {
        background-color: #9ca3af; /* gray-400 */
        cursor: not-allowed;
        transform: none;
        box-shadow: none;
      }
      #progress-bar {
        position: fixed; top: 0; left: 0; height: 6px;
        background-color: var(--secondary-color);
        width: 0%; z-index: 100; transition: width 0.2s ease-out;
      }
      #course-nav a {
        transition: all 0.2s ease-in-out;
        border-left: 3px solid transparent;
      }
      #course-nav a.active {
        background-color: #e0f2f1; /* emerald-50 */
        color: var(--primary-color);
        border-left-color: var(--secondary-color);
        transform: translateX(4px);
      }
      #course-nav a.completed { color: var(--secondary-color); }
      #course-nav a.completed::after {
        content: "‚úî"; font-weight: bold; margin-left: 8px;
      }
      .step-circle {
        background-color: var(--secondary-color);
        color: white; border-radius: 9999px; width: 2rem;
        height: 2rem; display: inline-flex; align-items: center;
        justify-content: center; margin-right: 0.75rem; font-size: 1rem;
        font-weight: 600; flex-shrink: 0;
      }
      /* Estilo para el acorde√≥n de FAQ */
      details > summary {
        list-style: none;
        cursor: pointer;
        padding: 1rem;
        background-color: #f8fafc;
        border: 1px solid #e2e8f0;
        border-radius: 0.375rem;
        font-weight: 600;
        color: var(--primary-color);
      }
      details > summary::-webkit-details-marker { display: none; }
      details > summary::after {
        content: '+';
        float: right;
        font-size: 1.25rem;
        font-weight: 700;
        color: var(--secondary-color);
      }
      details[open] > summary::after { content: '‚àí'; }
      details[open] > summary {
        background-color: #e0f2f1;
        border-bottom-left-radius: 0;
        border-bottom-right-radius: 0;
      }
      details > div {
        padding: 1rem;
        border: 1px solid #e2e8f0;
        border-top: none;
        border-bottom-left-radius: 0.375rem;
        border-bottom-right-radius: 0.375rem;
        background-color: #fff;
      }
    </style>
    <script>
      !(function (f, b, e, v, n, t, s) {
        if (f.fbq) return;
        n = f.fbq = function () {
          n.callMethod
            ? n.callMethod.apply(n, arguments)
            : n.queue.push(arguments);
        };
        if (!f._fbq) f._fbq = n;
        n.push = n; n.loaded = !0; n.version = "2.0"; n.queue = [];
        t = b.createElement(e); t.async = !0; t.src = v;
        s = b.getElementsByTagName(e)[0];
        s.parentNode.insertBefore(t, s);
      })(
        window, document, "script",
        "https://connect.facebook.net/en_US/fbevents.js"
      );
      fbq("init", "639715789143642");
      fbq("track", "PageView");
    </script>
    <noscript><img height="1" width="1" style="display: none"
      src="https://www.facebook.com/tr?id=639715789143642&ev=PageView&noscript=1"
    /></noscript>
  </head>
  <body class="bg-slate-100">
    <div id="progress-bar"></div>
    <header class="bg-white shadow-sm sticky top-0 z-50">
      <div
        class="container mx-auto max-w-7xl p-4 flex justify-between items-center"
      >
        <h1 class="text-xl md:text-2xl font-bold text-primary">
          CertiTec Colombia: Curso Experto
        </h1>
        <a href="#quiz-start" class="btn-main hidden md:inline-block"
          >Iniciar Evaluaci√≥n</a
        >
      </div>
    </header>

    <div class="container mx-auto max-w-7xl mt-8 px-4">
      <div class="lg:flex lg:space-x-8">
        <aside class="hidden lg:block w-1/4">
          <div class="sticky top-24">
            <h3 class="font-bold text-lg text-primary mb-4">
              Contenido del Curso
            </h3>
            <nav id="course-nav" class="flex flex-col space-y-2 text-sm">
                <a href="#intro" class="block p-3 rounded-md font-semibold text-gray-600 hover:bg-gray-200">Bienvenida</a>
                <a href="#audience" class="block p-3 rounded-md font-semibold text-gray-600 hover:bg-gray-200">¬øPara qui√©n es este curso?</a>
                <a href="#module1" class="block p-3 rounded-md font-semibold text-gray-600 hover:bg-gray-200">M√≥dulo 1: Fundamentos de Inocuidad</a>
                <a href="#module2" class="block p-3 rounded-md font-semibold text-gray-600 hover:bg-gray-200">M√≥dulo 2: Microorganismos y ETAs</a>
                <a href="#module3" class="block p-3 rounded-md font-semibold text-gray-600 hover:bg-gray-200">M√≥dulo 3: Las 5 Claves de la OMS</a>
                <a href="#module4" class="block p-3 rounded-md font-semibold text-gray-600 hover:bg-gray-200">M√≥dulo 4: Sistema HACCP</a>
                <a href="#module5" class="block p-3 rounded-md font-semibold text-gray-600 hover:bg-gray-200">M√≥dulo 5: Normativa Colombiana</a>
                <a href="#bonus" class="block p-3 rounded-md font-semibold text-gray-600 hover:bg-gray-200">M√≥dulos Interactivos</a>
                <a href="#certificate" class="block p-3 rounded-md font-semibold text-gray-600 hover:bg-gray-200">Tu Certificado</a>
                <a href="#faq" class="block p-3 rounded-md font-semibold text-gray-600 hover:bg-gray-200">Preguntas Frecuentes</a>
                <a href="#quiz-start" class="block p-3 rounded-md font-bold text-secondary hover:bg-gray-200">Evaluaci√≥n Final</a>
            </nav>
          </div>
        </aside>

        <main class="w-full lg:w-3/4 space-y-12">
            <section id="intro">
                <div class="bg-white p-8 rounded-lg shadow-xl relative overflow-hidden">
                    <span class="absolute top-0 right-0 mt-2 mr-2 text-xs font-bold bg-yellow-300 text-yellow-800 py-1 px-3 rounded-full">CURSO EXPERTO</span>
                    <h2 class="text-3xl md:text-4xl font-extrabold text-primary mb-4">Convi√©rtete en Experto en Manipulaci√≥n de Alimentos</h2>
                    <p class="text-lg text-gray-600 mb-6">Domina las pr√°cticas de inocuidad, cumple con la **Resoluci√≥n 2674 de 2013** y obt√©n tu certificado avalado. Este curso te da el conocimiento para proteger la salud de tus clientes y asegurar la calidad en tu negocio.</p>
                    <a href="#quiz-start" class="btn-main text-lg !px-8 !py-3">¬°Comenzar Examen y Certificarme Ahora!</a>
                </div>
            </section>

            <section id="audience">
              <div class="bg-white p-6 rounded-lg shadow-md">
                <h2 class="text-2xl font-bold text-primary mb-4"><i class="fas fa-users mr-3 text-secondary"></i>¬øPara Qui√©n es Este Curso?</h2>
                <p class="text-gray-700 mb-4">Este curso es esencial para cualquier persona que tenga contacto con alimentos en su cadena de producci√≥n o servicio.</p>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                  <div class="bg-slate-50 p-4 rounded-lg flex items-center">
                    <i class="fas fa-utensils text-xl text-secondary mr-3"></i>
                    <span class="text-gray-700">Personal de Restaurantes y Cafeter√≠as</span>
                  </div>
                  <div class="bg-slate-50 p-4 rounded-lg flex items-center">
                    <i class="fas fa-shopping-cart text-xl text-secondary mr-3"></i>
                    <span class="text-gray-700">Emprendedores de Alimentos</span>
                  </div>
                  <div class="bg-slate-50 p-4 rounded-lg flex items-center">
                    <i class="fas fa-graduation-cap text-xl text-secondary mr-3"></i>
                    <span class="text-gray-700">Estudiantes de Gastronom√≠a</span>
                  </div>
                  <div class="bg-slate-50 p-4 rounded-lg flex items-center">
                    <i class="fas fa-truck text-xl text-secondary mr-3"></i>
                    <span class="text-gray-700">Personal de Plantas de Procesamiento</span>
                  </div>
                </div>
              </div>
            </section>

            <section id="module1">
              <div class="bg-white p-6 rounded-lg shadow-md">
                <h2 class="text-2xl font-bold text-primary mb-4"><i class="fas fa-hands-wash mr-3 text-secondary"></i>M√≥dulo 1: Fundamentos de Inocuidad y Limpieza</h2>
                <p class="text-gray-700 mb-4">La base de todo. Aprende la diferencia cr√≠tica entre limpiar y desinfectar, y por qu√© un correcto lavado de manos es tu primera l√≠nea de defensa.</p>
                <ul class="list-disc list-inside space-y-2 text-gray-700">
                    <li><strong class="text-primary">Lavado de Manos:</strong> T√©cnica correcta de 20 segundos. Cu√°ndo y por qu√©.</li>
                    <li><strong class="text-primary">Limpieza vs. Desinfecci√≥n:</strong> Protocolos, diluciones (ej. hipoclorito) y productos autorizados.</li>
                    <li><strong class="text-primary">Control de Plagas (MIP):</strong> C√≥mo prevenir la entrada y proliferaci√≥n de plagas.</li>
                </ul>
              </div>
            </section>

            <section id="module2">
              <div class="bg-white p-6 rounded-lg shadow-md">
                <h2 class="text-2xl font-bold text-primary mb-4"><i class="fas fa-bacterium mr-3 text-secondary"></i>M√≥dulo 2: Microorganismos y ETAs</h2>
                <p class="text-gray-700 mb-4">Entiende al enemigo. Las Enfermedades Transmitidas por Alimentos (ETAs) son causadas por peligros que no se ven. Aprende a identificarlos.</p>
                <ul class="list-disc list-inside space-y-2 text-gray-700">
                    <li><strong class="text-primary">Peligros Biol√≥gicos:</strong> Bacterias (Salmonella, E. coli), virus (Hepatitis A), y par√°sitos.</li>
                    <li><strong class="text-primary">Peligros Qu√≠micos:</strong> Residuos de limpieza, pesticidas.</li>
                    <li><strong class="text-primary">Peligros F√≠sicos:</strong> Vidrio, metal, pl√°stico, y c√≥mo evitarlos.</li>
                </ul>
              </div>
            </section>

            <section id="module3">
              <div class="bg-white p-6 rounded-lg shadow-md">
                <h2 class="text-2xl font-bold text-primary mb-4"><i class="fas fa-check-double mr-3 text-secondary"></i>M√≥dulo 3: Las 5 Claves de la Inocuidad (OMS)</h2>
                <p class="text-gray-700 mb-4">Estudia los 5 pilares mundialmente reconocidos por la OMS para garantizar alimentos seguros. Aqu√≠ combinamos las claves 2, 3, 4 y 5 de tu curso anterior.</p>
                <ul class="list-disc list-inside space-y-2 text-gray-700">
                    <li><strong class="text-primary">1. Separar Crudos y Cocidos:</strong> Evitar la contaminaci√≥n cruzada (tablas, almacenamiento en nevera).</li>
                    <li><strong class="text-primary">2. Cocinar Completamente:</strong> Temperaturas internas seguras (ej. > 75¬∞C) para eliminar pat√≥genos.</li>
                    <li><strong class="text-primary">3. Mantener Temperaturas Seguras:</strong> La "Zona de Peligro" (5¬∞C a 60¬∞C). Refrigeraci√≥n y congelaci√≥n correctas.</li>
                    <li><strong class="text-primary">4. Usar Agua y Materias Primas Seguras:</strong> Recepci√≥n, rotaci√≥n (FIFO) y lavado de vegetales.</li>
                </ul>
              </div>
            </section>

            <section id="module4">
              <div class="bg-white p-6 rounded-lg shadow-md">
                <h2 class="text-2xl font-bold text-primary mb-4"><i class="fas fa-clipboard-check mr-3 text-secondary"></i>M√≥dulo 4: Introducci√≥n al Sistema HACCP</h2>
                <p class="text-gray-700 mb-4">Da un paso profesional. El sistema HACCP (An√°lisis de Peligros y Puntos Cr√≠ticos de Control) es el est√°ndar de oro para la gesti√≥n de la inocuidad.</p>
                <ul class="list-disc list-inside space-y-2 text-gray-700">
                    <li><strong class="text-primary">¬øQu√© es HACCP?</strong> Un sistema preventivo, no reactivo.</li>
                    <li><strong class="text-primary">Identificaci√≥n de Peligros:</strong> D√≥nde pueden salir mal las cosas.</li>
                    <li><strong class="text-primary">Puntos Cr√≠ticos de Control (PCC):</strong> D√≥nde podemos controlar el peligro (ej. la cocci√≥n, el enfriamiento).</li>
                </ul>
              </div>
            </section>

            <section id="module5">
              <div class="bg-white p-6 rounded-lg shadow-md border-t-4 border-secondary">
                <h2 class="text-2xl font-bold text-primary mb-4"><i class="fas fa-gavel mr-3 text-secondary"></i>M√≥dulo 5: Normativa Clave en Colombia</h2>
                <p class="text-gray-700 mb-4">El cumplimiento no es opcional. Conoce el marco legal que rige todas las actividades de alimentos en el territorio nacional.</p>
                <ul class="list-disc list-inside space-y-2 text-gray-700">
                  <li><strong class="text-primary">Resoluci√≥n 2674 de 2013:</strong> Es la "biblia" de la manipulaci√≥n de alimentos en Colombia. Define los requisitos para personal, equipos, instalaciones y procesos.</li>
                  <li><strong class="text-primary">Responsabilidades del Manipulador:</strong> Estado de salud, capacitaci√≥n obligatoria (como este curso) y pr√°cticas higi√©nicas.</li>
                  <li><strong class="text-primary">Planes de Saneamiento:</strong> Obligatoriedad de tener programas de limpieza, residuos y control de plagas.</li>
                </ul>
              </div>
            </section>

            <section id="bonus">
              <div class="bg-white p-6 rounded-lg shadow-md">
                <h2 class="text-2xl font-bold text-primary mb-4"><i class="fas fa-gamepad mr-3 text-secondary"></i>¬°Bonus! M√≥dulos Interactivos</h2>
                <p class="text-gray-700 mb-4">El conocimiento se fija mejor practicando. Nuestro curso incluye casos de estudio interactivos para poner a prueba tu decisi√≥n.</p>
                <div class="bg-blue-50 border-l-4 border-blue-400 text-blue-800 p-4" role="alert">
                  <p class="font-bold">Ejemplo de Caso de Estudio:</p>
                  <p>"Un cliente reporta una intoxicaci√≥n. ¬øQu√© haces primero? A) Descartas la queja. B) Revisas el lote del producto. C) Llamas a tu abogado."</p>
                </div>
              </div>
            </section>

            <section id="certificate">
              <div class="bg-white p-6 rounded-lg shadow-md">
                <h2 class="text-2xl font-bold text-primary mb-4"><i class="fas fa-award mr-3 text-secondary"></i>Tu Certificado de Experto</h2>
                <p class="text-gray-700 mb-4">Al aprobar la evaluaci√≥n final y completar el proceso, recibir√°s tu certificado digital avalado por CertiTec Colombia, listo para presentar en visitas de sanidad o en tu hoja de vida.</p>
                <div class="border-2 border-dashed border-gray-300 rounded-lg p-4 bg-gray-50 flex justify-center items-center">
                  <img src="https://via.placeholder.com/600x400.png?text=Modelo+de+Tu+Certificado+Aqui" alt="Modelo del certificado de manipulaci√≥n de alimentos" class="rounded-md shadow-lg" />
                </div>
              </div>
            </section>
            
            <section id="faq">
              <div class="bg-white p-6 rounded-lg shadow-md">
                <h2 class="text-2xl font-bold text-primary mb-4"><i class="fas fa-question-circle mr-3 text-secondary"></i>Preguntas Frecuentes</h2>
                <div class="space-y-4">
                  <details>
                    <summary>¬øEl certificado es v√°lido a nivel nacional?</summary>
                    <div>
                      <p>S√≠. Nuestro curso cumple con los requisitos de capacitaci√≥n exigidos por la Resoluci√≥n 2674 de 2013, v√°lida en toda Colombia.</p>
                    </div>
                  </details>
                  <details>
                    <summary>¬øQu√© pasa si no apruebo el examen?</summary>
                    <div>
                      <p>¬°No te preocupes! Puedes repasar los m√≥dulos y volver a tomar el examen las veces que sea necesario sin costo adicional. Queremos que aprendas.</p>
                    </div>
                  </details>
                  <details>
                    <summary>¬øEn cu√°nto tiempo recibo mi certificado?</summary>
                    <div>
                      <p>Una vez apruebes el examen, completes tus datos y realices el pago, debes enviar el comprobante por WhatsApp. Nuestro equipo valida tu pago (esto puede tomar unas horas en horario laboral) y tu certificado quedar√° activo en la plataforma de verificaci√≥n.</p>
                    </div>
                  </details>
                  <details>
                    <summary>¬øQu√© vigencia tiene el certificado?</summary>
                    <div>
                      <p>La normativa colombiana (Resoluci√≥n 2674 de 2013) exige que la capacitaci√≥n sea actualizada por lo menos una vez al a√±o. Por lo tanto, el certificado tiene una vigencia de 1 a√±o.</p>
                    </div>
                  </details>
                </div>
              </div>
            </section>

            <section id="quiz-start" class="text-center py-12">
                <h2 class="text-3xl font-bold text-primary mb-4">¬øListo para Probar tu Conocimiento?</h2>
                <p class="text-gray-600 mb-6">Demuestra que has dominado los conceptos para obtener tu certificado.</p>
                <button id="start-quiz-btn" class="btn-main text-xl !px-10 !py-4">¬°Iniciar Examen Ahora!</button>
            </section>
        </main>
      </div>
    </div>

    <footer class="bg-white mt-12 border-t">
      <div class="container mx-auto max-w-7xl p-6 text-center text-gray-500">
        <p>&copy; 2024 CertiTec Colombia. Todos los derechos reservados.</p>
        <p class="text-sm">Certificaci√≥n en inocuidad y buenas pr√°cticas.</p>
      </div>
    </footer>

    <div
      id="quiz-modal"
      class="hidden fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 p-4"
    >
      <div
        class="bg-white w-full max-w-2xl rounded-lg shadow-2xl p-6 md:p-8 transform transition-all scale-95 opacity-0"
        id="quiz-content"
      ></div>
    </div>

    <div id="certificate-modal" class="hidden fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-[60] p-4 overflow-y-auto">
      <div class="bg-white w-full max-w-lg rounded-lg shadow-2xl p-6 md:p-8 transform transition-all scale-95 opacity-0" id="certificate-content">
        <div id="modal-step-1">
          <div class="text-center">
            <i class="fas fa-award text-6xl text-yellow-400 mb-4"></i>
            <h3 class="text-2xl md:text-3xl font-extrabold text-primary">
              ¬°Excelente! Has aprobado el examen
            </h3>
            <p class="text-gray-600 mt-2 text-base" id="final-score-text"></p>
          </div>
          <div class="mt-8 text-left border-t pt-6">
            <h4 class="font-bold text-xl text-primary flex items-center mb-4">
              <span class="step-circle">1</span>Completa tus datos
            </h4>
          <div class="space-y-4">
    <div>
      <label for="fullName" class="block font-semibold text-gray-700 mb-1"
        >Nombre Completo</label
      >
      <input
        type="text"
        id="fullName"
        placeholder="Tu nombre para el certificado"
        class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-secondary focus:border-secondary"
      />
    </div>
    <div>
      <label for="documentId" class="block font-semibold text-gray-700 mb-1"
        >Documento de Identidad</label
      >
      <div class="grid grid-cols-3 gap-2">
        <select
          id="documentType"
          class="col-span-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-secondary focus:border-secondary"
        >
          <option value="CC">C.C.</option>
          <option value="CE">C.E.</option>
          <option value="Pasaporte">Pasaporte</option>
          <option value="PPT">PPT</option>
        </select>
        <input
          type="text"
          id="documentId"
          placeholder="Tu n√∫mero"
          class="col-span-2 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-secondary focus:border-secondary"
        />
      </div>
    </div>


    </div>
    </div> <button
      id="go-to-step-2-btn"
      class="btn-main w-full !py-3 text-lg mt-8"
    >
      Siguiente: Realizar Pago <i class="fas fa-arrow-right ml-2"></i>
    </button>
        
        <div id="modal-step-2" class="hidden">
          <div class="text-center">
            <i class="fas fa-wallet text-6xl text-secondary mb-4"></i>
            <h3 class="text-2xl md:text-3xl font-extrabold text-primary">Realiza el Pago</h3>
            <p class="text-gray-600 mt-2 text-base">Elige tu m√©todo preferido para emitir tu certificado.</p>
          </div>
          <div class="mt-8 text-left space-y-6">
            <div>
              <h4 class="font-bold text-xl text-primary flex items-center mb-4">
                <span class="step-circle">2</span>Elige tu m√©todo de pago
              </h4>
              <div class="bg-slate-100 p-3 my-4 rounded-lg text-center">
                <p class="text-gray-600 text-sm">Valor de la expedici√≥n</p>
                <p class="text-3xl font-extrabold text-primary">$35.000 <span class="text-2xl font-semibold">COP</span></p>
              </div>
              <div class="space-y-3">
                  <a href="https://linkdepagospse.rappipay.co/kZYKi5" target="_blank" class="w-full flex items-center justify-center gap-3 bg-white border-2 border-gray-300 text-gray-800 font-bold py-3 px-4 rounded-lg hover:border-primary transition-all text-lg">
                    <img src="https://microempresas.co/wp-content/uploads/2024/12/pse-logo-big.webp" alt="Logo PSE" class="h-8"/>
                    <span>Pagar con PSE</span>
                  </a>
                  <a id="transfer-whatsapp-btn" href="#" class="w-full flex items-center justify-center gap-3 bg-green-500 text-white font-bold py-3 px-4 rounded-lg hover:bg-green-600 transition-all text-lg">
                    <i class="fab fa-whatsapp text-2xl"></i>
                    <span>Pagar por Transferencia</span>
                  </a>
                  <p class="text-center text-xs text-gray-500">Ser√°s redirigido a WhatsApp para coordinar.</p>
              </div>
            </div>
            <button id="go-to-step-3-btn" class="btn-main w-full !py-3 text-lg">
              Ya realic√© el pago, siguiente <i class="fas fa-arrow-right ml-2"></i>
            </button>
          </div>
          <div class="text-center mt-6">
            <button id="go-to-step-1-btn" class="text-sm text-gray-500 hover:text-primary font-semibold">
              &larr; Volver y corregir mis datos
            </button>
          </div>
        </div>
        <div id="modal-step-3" class="hidden">
          <div class="text-center">
            <i class="fas fa-check-circle text-6xl text-green-500 mb-4"></i>
            <h3 class="text-2xl md:text-3xl font-extrabold text-primary">¬°Proceso Casi Completo!</h3>
            <p class="text-gray-600 mt-2 text-base">Solo falta un paso para finalizar.</p>
          </div>
          <div class="mt-8 text-left space-y-6">
            <div>
              <h4 class="font-bold text-xl text-primary flex items-center mb-3">
                <span class="step-circle">3</span>Env√≠a el comprobante
              </h4>
              <p class="text-gray-700 text-sm mb-4">
                Haz clic en el bot√≥n para abrir WhatsApp y <strong>adjunta tu comprobante de pago</strong>. Esto es indispensable para validar tu certificado.
              </p>
              <button id="generate-whatsapp-btn" class="w-full !py-3 text-lg bg-green-500 hover:bg-green-600 text-white font-bold rounded-lg transition-all flex items-center justify-center gap-2">
                <i class="fab fa-whatsapp"></i>Enviar Comprobante
              </button>
            </div>
            <div class="border-t pt-6">
              <h4 class="font-bold text-xl text-primary flex items-center mb-3">
                <span class="step-circle">4</span>Verifica y descarga
              </h4>
              <p class="text-gray-700 text-sm mb-4">
                Una vez validemos tu pago (esto puede tardar unas horas), tu certificado aparecer√° en el siguiente enlace. <strong>¬°Gu√°rdalo para consultarlo m√°s tarde!</strong>
              </p>
              <a href="https://quickcontrola.com/verificacion" target="_blank" class="w-full !py-3 text-lg bg-primary hover:bg-blue-800 text-white font-bold rounded-lg transition-all flex items-center justify-center gap-2">
                <i class="fas fa-search"></i>Verificar mi Certificado
              </a>
            </div>
          </div>
          <div class="text-center mt-6">
            <button id="go-to-step-2-btn-back" class="text-sm text-gray-500 hover:text-primary font-semibold">
              &larr; Volver a los m√©todos de pago
            </button>
          </div>
        </div>
      </div>
    </div>
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const sections = document.querySelectorAll("main section");
        const navLinks = document.querySelectorAll("#course-nav a");
        const progressBar = document.getElementById("progress-bar");

        // Observer para la navegaci√≥n lateral
        const observer = new IntersectionObserver((entries) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              navLinks.forEach((link) => {
                link.classList.remove("active");
                if (link.getAttribute("href").substring(1) === entry.target.id) {
                  link.classList.add("active", "completed");
                }
              });
            }
          });
        }, { rootMargin: "-50% 0px -50% 0px", threshold: 0.1 }); // Ajustado para mejor detecci√≥n

        sections.forEach((section) => observer.observe(section));

        // Barra de progreso superior
        window.addEventListener("scroll", () => {
          const scrollTop = window.scrollY;
          const docHeight = document.documentElement.scrollHeight - window.innerHeight;
          const scrollPercent = (scrollTop / docHeight) * 100;
          progressBar.style.width = `${scrollPercent}%`;
        });

        // --- Selectores de Modales ---
        const startQuizBtn = document.getElementById("start-quiz-btn");
        const quizModal = document.getElementById("quiz-modal");
        const quizContent = document.getElementById("quiz-content");
        const certificateModal = document.getElementById("certificate-modal");
        const certificateContent = document.getElementById("certificate-content");
        
        // --- BANCO DE PREGUNTAS ACTUALIZADO ---
        const questions = [
          { question: "La Resoluci√≥n que rige la manipulaci√≥n de alimentos en Colombia es:", options: ["La 1080 de 1992", "La 2674 de 2013", "El Decreto 780 de 2016"], answer: 1 },
          { question: "¬øCu√°l es la forma m√°s efectiva de evitar la contaminaci√≥n cruzada?", options: ["Lavar los alimentos con vinagre", "Usar diferentes tablas de cortar para crudos y cocidos", "Cocinar todo a fuego muy alto"], answer: 1 },
          { question: "La 'Zona de Peligro' de temperatura para la proliferaci√≥n bacteriana es:", options: ["0¬∞C a 10¬∞C", "-5¬∞C a 5¬∞C", "5¬∞C a 60¬∞C"], answer: 2 },
          { question: "El lavado de manos debe durar un m√≠nimo de:", options: ["5 segundos", "10 segundos", "20 segundos"], answer: 2 },
          { question: "Para desinfectar superficies, una pr√°ctica com√∫n es usar:", options: ["Solo agua caliente", "Una soluci√≥n de hipoclorito y agua", "Jugo de lim√≥n"], answer: 1 },
          { question: "¬øD√≥nde se deben almacenar las carnes crudas en el refrigerador?", options: ["En la parte superior para que enfr√≠en m√°s r√°pido", "Junto a las verduras para ahorrar espacio", "En la parte inferior y en recipientes sellados"], answer: 2 },
          { question: "La cocci√≥n completa de un alimento generalmente asegura que se eliminen:", options: ["Los nutrientes", "Los microorganismos peligrosos", "El sabor"], answer: 1 },
          { question: "No se deben dejar alimentos cocidos a temperatura ambiente por m√°s de:", options: ["8 horas", "4 horas", "2 horas"], answer: 2 },
          // --- NUEVAS PREGUNTAS ---
          { question: "¬øQu√© significa HACCP?", options: ["Habilidad Alta para Cocinar", "An√°lisis de Peligros y Puntos Cr√≠ticos de Control", "Higiene y Aseo Constante del Personal"], answer: 1 },
          { question: "Una 'ETA' se refiere a:", options: ["Enfermedad Transmitida por Alimentos", "Equipo de Tareas de Aseo", "Elemento de Trazabilidad Avanzado"], answer: 0 },
          { question: "La Salmonella es un ejemplo de:", options: ["Un qu√≠mico de limpieza", "Una bacteria (peligro biol√≥gico)", "Un peligro f√≠sico (ej. un tornillo)"], answer: 1 }
        ];

        const passingScore = 0.75; // Se debe acertar el 75%
        let currentQuestionIndex = 0;
        let score = 0;

        // --- Selectores de Pasos del Modal ---
        const modalStep1 = document.getElementById("modal-step-1");
        const modalStep2 = document.getElementById("modal-step-2");
        const modalStep3 = document.getElementById("modal-step-3");
        const goToStep1Btn = document.getElementById("go-to-step-1-btn");
        const goToStep2Btn = document.getElementById("go-to-step-2-btn");
        const goToStep2BtnBack = document.getElementById("go-to-step-2-btn-back");
        const goToStep3Btn = document.getElementById("go-to-step-3-btn");
        
        // --- Selectores de Campos ---
        const fullNameInput = document.getElementById("fullName");
        const documentTypeInput = document.getElementById("documentType");
        const documentIdInput = document.getElementById("documentId");

        const API_URL = "http://localhost:3001/api/v1/orders/create-order"; // No se cambia, seg√∫n lo solicitado

        function navigateToStep(step) {
          modalStep1.classList.add("hidden");
          modalStep2.classList.add("hidden");
          modalStep3.classList.add("hidden");
          if (step === 1) modalStep1.classList.remove("hidden");
          if (step === 2) modalStep2.classList.remove("hidden");
          if (step === 3) modalStep3.classList.remove("hidden");
        }

    goToStep2Btn.addEventListener("click", async () => {
      // 1. Validaci√≥n
      const fullName = fullNameInput.value.trim();
      const documentId = documentIdInput.value.trim();

      if (fullName === "" || documentId === "") {
        alert("Por favor, completa tu nombre y n√∫mero de documento.");
        return;
      }

      // 2. Deshabilitar bot√≥n
      goToStep2Btn.disabled = true;
      goToStep2Btn.innerHTML = 'Creando orden... <i class="fas fa-spinner fa-spin ml-2"></i>';

      // 3. L√≥gica para separar nombre y apellido
      const nameParts = fullName.split(" ");
      const nombre = nameParts.shift() || "";
      const apellido = nameParts.join(" ") || "";

      // 4. Construir el payload (ACTUALIZADO)
      const orderPayload = {
        nombre: nombre,
        apellido: apellido,
        numeroDeDocumento: documentId,
        vendedor: "certitec_colombia", // Vendedor actualizado
        valor: 35000, // Precio actualizado
        tipo: "Curso Experto Manipulacion Alimentos", // Tipo actualizado
        payment_status: "PENDING"
      };

      let nuevaOrden = null;
      let apiError = null;

      // 5. LLAMADA A LA API
      try {
        nuevaOrden = await createOrder(orderPayload);
        console.log("Orden creada exitosamente:", nuevaOrden);
      } catch (error) {
        console.error("Error de API al crear la orden:", error);
        apiError = error;
      }

      // 6. REACTIVAR BOT√ìN
      goToStep2Btn.disabled = false;
      goToStep2Btn.innerHTML = 'Siguiente: Realizar Pago <i class="fas fa-arrow-right ml-2"></i>';

      // 7. L√ìGICA DE NAVEGACI√ìN
      if (nuevaOrden) {
        try {
          alert("¬°Orden creada exitosamente! üéâ\n\nPor favor, elige tu m√©todo de pago a continuaci√≥n.");
          navigateToStep(2); // Navegar al paso 2
        } catch (uiError) {
          console.error("Error de UI (interfaz) despu√©s de crear la orden:", uiError);
          alert("La orden se cre√≥ (ID: " + nuevaOrden._id + "), pero hubo un error al mostrar los m√©todos de pago. Revisa la consola (F12) para m√°s detalles.");
        }
      } else {
        alert(`No se pudo crear la orden:\n${apiError ? apiError.message : 'Error desconocido'}\n\nPor favor, revisa tus datos o intenta m√°s tarde.`);
      }
    });

        goToStep1Btn.addEventListener("click", () => navigateToStep(1));
        goToStep3Btn.addEventListener("click", () => navigateToStep(3));
        goToStep2BtnBack.addEventListener("click", () => navigateToStep(2));
        
        // L√≥gica para el bot√≥n de transferencia por WhatsApp
        document.getElementById('transfer-whatsapp-btn').addEventListener('click', (e) => {
          e.preventDefault();
          const phone = "573107941580"; // Reemplaza si es necesario
          const message = encodeURIComponent("¬°Hola! Deseo pagar por transferencia el certificado del curso de manipulaci√≥n de alimentos de CertiTec Colombia.");
          const whatsappUrl = `https://wa.me/${phone}?text=${message}`;
          window.open(whatsappUrl, '_blank');
        });

        // --- L√ìGICA DEL QUIZ ---

        function startQuiz() {
          fbq("track", "StartQuiz");
          currentQuestionIndex = 0;
          score = 0;
          quizModal.classList.remove("hidden");
          setTimeout(() => {
            quizContent.classList.add("scale-100", "opacity-100");
            quizContent.classList.remove("scale-95", "opacity-0");
          }, 50);
          renderQuestion();
        }

        function renderQuestion() {
          const q = questions[currentQuestionIndex];
          quizContent.innerHTML = `<div class="mb-2 text-sm font-semibold text-gray-500">Pregunta ${currentQuestionIndex + 1} de ${questions.length}</div><h3 class="text-2xl font-bold text-primary mb-6">${q.question}</h3><div id="options-container" class="space-y-3 mb-6">${q.options.map((option, index) => `<button data-index="${index}" class="option-btn block w-full text-left p-4 rounded-lg border-2 border-gray-300 hover:border-secondary transition-all">${option}</button>`).join("")}</div><div id="feedback" class="h-8 text-center font-bold"></div><div class="flex justify-end mt-4"><button id="next-q-btn" class="btn-main" disabled>Siguiente &rarr;</button></div>`;
          document.querySelectorAll(".option-btn").forEach((btn) => btn.addEventListener("click", selectAnswer));
        }

        function selectAnswer(e) {
          const selectedBtn = e.currentTarget;
          const selectedIndex = parseInt(selectedBtn.dataset.index);
          const correctIndex = questions[currentQuestionIndex].answer;
          document.querySelectorAll(".option-btn").forEach((btn) => (btn.disabled = true));
          
          const feedbackEl = document.getElementById("feedback");
          
          if (selectedIndex === correctIndex) {
            score++;
            selectedBtn.classList.add("!border-green-500", "bg-green-50", "!font-bold");
            feedbackEl.textContent = "¬°Correcto!";
            feedbackEl.style.color = "var(--success-color)";
          } else {
            selectedBtn.classList.add("!border-red-500", "bg-red-50");
            feedbackEl.textContent = "Incorrecto.";
            feedbackEl.style.color = "var(--error-color)";
            // Resaltar la correcta
            document.querySelector(`.option-btn[data-index="${correctIndex}"]`).classList.add("!border-green-500", "bg-green-50", "!font-bold");
          }
          document.getElementById("next-q-btn").disabled = false;
        }
        
        quizContent.addEventListener("click", (e) => {
          if (e.target && e.target.id === "next-q-btn") {
            currentQuestionIndex++;
            if (currentQuestionIndex < questions.length) {
              renderQuestion();
            } else {
              showResults();
            }
          }
        });
        
        function showResults() {
          quizModal.classList.add("hidden");
          const finalScorePercent = score / questions.length;
          const scorePercentage = Math.round(finalScorePercent * 100);
          
          if (finalScorePercent >= passingScore) {
            document.getElementById("final-score-text").textContent = `Tu puntaje: ${score}/${questions.length} (${scorePercentage}%).`;
            certificateModal.classList.remove("hidden");
            navigateToStep(1); // Siempre iniciar en el paso 1
            setTimeout(() => {
              certificateContent.classList.add("scale-100", "opacity-100");
              certificateContent.classList.remove("scale-95", "opacity-0");
            }, 50);
          } else {
            quizContent.innerHTML = `<h3 class="text-2xl font-bold text-primary mb-4 text-center">Examen no superado</h3><p class="text-center text-gray-700 mb-6">Tu puntaje fue de ${score}/${questions.length} (${scorePercentage}%). Necesitas al menos un ${passingScore * 100}% para aprobar.</p><p class="text-center text-gray-700 mb-8">Te recomendamos repasar los m√≥dulos y volver a intentarlo.</p><div class="text-center"><button id="retry-quiz-btn" class="btn-main">Volver a Intentar</button></div>`;
            quizModal.classList.remove("hidden");
            document.getElementById("retry-quiz-btn").addEventListener("click", () => {
              quizModal.classList.add("hidden");
              startQuiz();
            });
          }
        }

        startQuizBtn.addEventListener("click", startQuiz);

        document.getElementById("generate-whatsapp-btn").addEventListener("click", () => {
          if (fullNameInput.value.trim() === "" || documentIdInput.value.trim() === "") {
            alert("Hubo un error. Por favor, vuelve atr√°s y completa tus datos.");
            navigateToStep(1); // Regresar al paso 1 si faltan datos
            return;
          }
          fbq("track", "Lead");
          const baseMessage = `¬°Hola! He completado el curso de CertiTec Colombia y adjunto mi comprobante de pago para el certificado.`;
          const userInfo = `\n\n*Nombre:* ${fullNameInput.value.trim()}\n*Documento:* ${documentTypeInput.value} ${documentIdInput.value.trim()}`;
          const finalMessage = encodeURIComponent(baseMessage + userInfo);
          const whatsappUrl = `https://wa.me/573107941580?text=${finalMessage}`; // Reemplaza si es necesario
          window.open(whatsappUrl, "_blank");
        });

        // --- Funci√≥n de API ---
        async function createOrder(orderData) {
          const response = await fetch(API_URL, {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify(orderData),
          });

          if (!response.ok) {
            const errorData = await response.json();
            throw new Error(errorData.message || "Error del servidor al crear la orden.");
          }

          return await response.json();
        }
      });
    </script>
  </body>
</html>